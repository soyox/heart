(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&u(c)}).observe(document,{childList:!0,subtree:!0});function r(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(t){if(t.ep)return;t.ep=!0;const n=r(t);fetch(t.href,n)}})();var R,s,T,w,E,H,h,d,m,f,o,l,v,g,y,i,M,x,b;function A(a){if(a){var e=new Stats;e.domElement.style.position="absolute",e.domElement.style.left="0",e.domElement.style.top="0",document.body.appendChild(e.domElement),requestAnimationFrame(function p(){e.update(),requestAnimationFrame(p)})}s=document.getElementById("container"),console.log(s),T=new THREE.PerspectiveCamera(50,1,.1,1e3),T.position.z=2,w=new THREE.OrthographicCamera(-1,1,1,-1,.1,1e3),w.position.z=2,E=new THREE.Scene,H=new THREE.Scene,h=new THREE.Scene;var r=new THREE.LoadingManager(()=>{i.scale.setScalar(.4),i.position.setZ(.5),i.children[0].children[0].setRotationFromEuler(new THREE.Euler(-.5*Math.PI,0,0,"XYZ")),i.lookAt(new THREE.Vector3(0,0,8.5)),i.children[0].children[0].material=c,E.add(i)}),u=new THREE.ColladaLoader(r);u.options.convertUpAxis=!0,u.load("https://s3-us-west-2.amazonaws.com/s.cdpn.io/168886/3d-modified-heart.dae",p=>{i=p.scene});var t=new THREE.AmbientLight(13421772,.4);E.add(t);var n=new THREE.DirectionalLight(16777215,.8);n.position.set(1,1,0).normalize(),E.add(n),console.log("window",window.innerWidth),m=new THREE.WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat}),f=new THREE.WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBFormat}),o=new THREE.WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBFormat}),d=new THREE.WebGLRenderer,d.setPixelRatio(window.devicePixelRatio/2),s.appendChild(d.domElement),v={time:{type:"f",value:1}};var c=new THREE.ShaderMaterial({uniforms:v,vertexShader:document.getElementById("shader-vert-pulse").textContent,fragmentShader:document.getElementById("shader-frag-heart").textContent});l={time:{type:"f",value:1},resolution:{type:"v2",value:new THREE.Vector2},feedbackTexture:{type:"sampler2D",value:o.texture},foregroundTexture:{type:"sampler2D",value:m.texture}};var B=new THREE.ShaderMaterial({uniforms:l,vertexShader:document.getElementById("shader-vert-feedback").textContent,fragmentShader:document.getElementById("shader-frag-feedback").textContent});R=new Date().getTime();var C=new THREE.PlaneBufferGeometry(2,2),F=new THREE.Mesh(C,B);F.scale.setScalar(.92),H.add(F),g=new THREE.MeshBasicMaterial({map:o.texture,transparent:!0,opacity:.5});var G=new THREE.PlaneBufferGeometry(2,2),k=new THREE.Mesh(G,g);h.add(k),y=new THREE.MeshBasicMaterial({map:m.texture,transparent:!0});var z=new THREE.PlaneBufferGeometry(2,2),P=new THREE.Mesh(z,y);h.add(P),L(),window.addEventListener("resize",L,!1),b="lookatmouse",M=x=.5,s.addEventListener("mousemove",W,!1)}function L(a){var e=s.getBoundingClientRect(),r=Math.min(e.width,e.height);l.resolution.value.x=r,l.resolution.value.y=r,m.setSize(r,r),f.setSize(r,r),o.setSize(r,r),d.setSize(r,r)}function W(a){var e=s.getBoundingClientRect();M=a.offsetX/e.width,x=a.offsetY/e.height,console.log(a)}function S(){var a=new Date().getTime(),e=a-R;R=a,requestAnimationFrame(S),I(e)}function I(a){var e=v.time.value+(a?a/1e3:.05);v.time.value=e,l.time.value=e,i&&i.position&&i.rotation&&(b==="lookatmouse"&&i.lookAt(new THREE.Vector3(10*(M-.5),-10*(x-.5),8.5)),b==="autorotate"&&i.children[0].children[0].setRotationFromEuler(new THREE.Euler(-.5*Math.PI,e,0,"XYZ"))),d.render(E,T,m,!1),d.render(H,w,f,!1);var r=o;o=f,f=r,l.feedbackTexture.value=o.texture,l.foregroundTexture.value=m.texture,g.map=o.texture,g.needsUpdate=!0,y.needsUpdate=!0,d.render(h,w)}A(!0);S();
